import{_ as t,W as p,X as e,Y as n,Z as s,a0 as o,a2 as c,C as u}from"./framework-5d92cd28.js";const i={},l=n("h2",{id:"使用",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用","aria-hidden":"true"},"#"),s(" 使用")],-1),r={href:"https://learnku.com/docs/iris-go/10/versioning/3761",target:"_blank",rel:"noopener noreferrer"},d=c(`<h2 id="功能" tabindex="-1"><a class="header-anchor" href="#功能" aria-hidden="true">#</a> 功能</h2><h3 id="通过控制器添加路由" tabindex="-1"><a class="header-anchor" href="#通过控制器添加路由" aria-hidden="true">#</a> 通过控制器添加路由</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>func newApp() *iris.Application {
	app := iris.New()
	mvc.New(app.Party(&quot;/&quot;)).Handle(&amp;lotteryController{})
	return app
}

func main() {
	app := newApp()

	userList = make([]string, 0)

	// http://localhost:8080
	app.Run(iris.Addr(&quot;:8080&quot;))
}

// 继承控制的函数即有路由，路由接上Get后字符串，为 http://localhost:8080/String
func (c *lotteryController) GetString() string {
	count := len(userList)
	return fmt.Sprintf(&quot;当前总共参与抽奖的用户数: %d\\n&quot;, count)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="简单并发测试" tabindex="-1"><a class="header-anchor" href="#简单并发测试" aria-hidden="true">#</a> 简单并发测试</h3><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestMVC</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	e <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token function">newApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Expect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>httptest<span class="token punctuation">.</span>StatusOK<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token string">&quot;当前总共参与抽奖的用户数: 0\\n&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			e<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/import&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithFormField</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;test_u%d&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Expect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>httptest<span class="token punctuation">.</span>StatusOK<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Expect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>httptest<span class="token punctuation">.</span>StatusOK<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token string">&quot;当前总共参与抽奖的用户数: 100\\n&quot;</span><span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/lucky&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Expect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>httptest<span class="token punctuation">.</span>StatusOK<span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Expect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>httptest<span class="token punctuation">.</span>StatusOK<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token string">&quot;当前总共参与抽奖的用户数: 99\\n&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><h3 id="c-ctx-urlparamdefault报错invalid-memory-address-or-nil-pointer-dereference" tabindex="-1"><a class="header-anchor" href="#c-ctx-urlparamdefault报错invalid-memory-address-or-nil-pointer-dereference" aria-hidden="true">#</a> c.ctx.URLParamDefault报错invalid memory address or nil pointer dereference</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>没找到原因，但把控制器ctx改为大写就正常了。。。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,8);function k(v,m){const a=u("ExternalLinkIcon");return p(),e("div",null,[l,n("p",null,[n("a",r,[s("中文文档"),o(a)])]),d])}const h=t(i,[["render",k],["__file","Iris 笔记.html.vue"]]);export{h as default};
